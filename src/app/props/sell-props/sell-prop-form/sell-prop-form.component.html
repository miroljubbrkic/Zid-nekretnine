
<mat-card>
    <mat-progress-bar *ngIf="isLoading" mode="indeterminate" value="40" color="warn"></mat-progress-bar>

    <form [formGroup]="form" (submit)="onSaveProp()" *ngIf="!isLoading">


        <mat-form-field>
            <mat-select 
            placeholder="Tip: "
            matInput 
            type="text" 
            formControlName="tip">
                <mat-option *ngFor="let tip of tipovi" [value]="tip.value">
                    {{tip.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>


        <mat-form-field>
            <input matInput type="number" formControlName="povrsina" placeholder="Povrsina">
        </mat-form-field>


        <mat-form-field>
            <input matInput type="number" formControlName="cenaKvadrata" placeholder="Cena kvadrata: ">
        </mat-form-field>


        <mat-form-field>
            <mat-select 
            placeholder="Struktura: "
            formControlName="struktura">
                <mat-option *ngFor="let struktura of strukture" [value]="struktura.value">
                    {{struktura.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>


        <mat-form-field>
            <input matInput type="number" formControlName="sprat" placeholder="Sprat: ">
        </mat-form-field>


        <mat-form-field>
            <input matInput type="number" formControlName="brojSpavacihSoba" placeholder="Broj spavaćih soba: ">
        </mat-form-field>


        <div>
            <button mat-stroked-button type="button" (click)="imgPicker.click()">Izaberite sliku</button>
            <input type="file" #imgPicker (change)="onImagePicked($event)" multiple>
        </div>


        <div *ngIf="imgPreviews && imgPreviews.length > 0">
            <div class="image-preview" *ngFor="let img of imgPreviews; let i = index">
                <button mat-fab color="warn" (click)="onDeleteImage(i)">
                    <mat-icon>delete</mat-icon>
                    Delete
                </button>
                <br>
                <img [src]="img" [alt]="form.value.povrsina + form.value.opis">
            </div>
        </div>

        <!-- <div *ngIf="imgPreviews && imgPreviews.length > 0">
            <mat-grid-list cols="3" rowHeight="250px" gutterSize="16px">
                <mat-grid-tile *ngFor="let img of imgPreviews; let i = index">
                    <mat-card class="image-card">
                            <button mat-fab color="warn" class="delete-button" (click)="onDeleteImage(i)">
                                <mat-icon>delete</mat-icon>
                                Delete
                            </button>
                        <img mat-card-image [src]="img" [alt]="form.value.povrsina + ' ' + form.value.opis">
                    </mat-card>
                </mat-grid-tile>
            </mat-grid-list>
        </div> -->


        <mat-form-field>
            <textarea 
            matInput 
            rows="4" 
            formControlName="opis"
            placeholder="Opis: "></textarea>
        </mat-form-field>


        <button 
            mat-raised-button 
            color="accent"
            type="submit">Sačuvaj
        </button>


    </form>
</mat-card>